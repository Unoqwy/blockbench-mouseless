{"version":3,"sources":["/home/runner/work/blockbench-mouseless/blockbench-mouseless/src/index.ts"],"sourcesContent":["function removeFromArray<T>(elt: T, array: T[]): boolean {\n    const eltIndex = array.indexOf(elt);\n    if (eltIndex != -1) {\n        array.splice(eltIndex, 1);\n        return true;\n    }\n    return false;\n}\n\nfunction removeAction(action: Action) {\n    if (removeFromArray(action, Keybinds.actions)) {\n        const category = (action as any).category;\n        const structCategoryActions = Keybinds.structure[category].actions;\n        removeFromArray(action, structCategoryActions);\n        if (structCategoryActions.length == 0) {\n            delete Keybinds.structure[category];\n        }\n    }\n}\n\n/**\n * Keep track of injected actions to remove them on unload.\n */\nnamespace InjectionStore {\n    const actions: Action[] = [];\n\n    export function registerAction(action: Action) {\n        actions.push(action);\n    }\n\n    export function unhook() {\n        actions.forEach(removeAction);\n    }\n}\n\nfunction sidebarAction(id: string, sides: string[], change_state: boolean | \"toggle\", opts: Partial<ActionOptions>) {\n    InjectionStore.registerAction(\n        new Action(id, {\n            ...opts,\n            category: \"view\",\n            click: () => {\n                sides\n                    .map(side => `show_${side}_bar`)\n                    .forEach(side => {\n                        const new_state = change_state == \"toggle\" ? !Prop[side] : change_state;\n                        Prop[side] = new_state;\n                    });\n                resizeWindow();\n            },\n        } as ActionOptions)\n    );\n}\n\nPlugin.register(\"mouseless\", {\n    icon: \"keyboard\",\n    title: \"Blockbench Mouseless\",\n    author: \"Unoqwy\",\n    description: \"Add shortcuts to fully take advantage of the keyboard\",\n    variant: \"both\",\n\n    onload() {\n        sidebarAction(\"toggle_left_sidebar\", [\"left\"], \"toggle\", {\n            name: \"Toggle Left Sidebar\",\n            icon: \"chevron-left\",\n        });\n        sidebarAction(\"toggle_right_sidebar\", [\"right\"], \"toggle\", {\n            name: \"Toggle Right Sidebar\",\n            icon: \"chevron-right\",\n        });\n        sidebarAction(\"hide_sidebars\", [\"left\", \"right\"], false, {\n            name: \"Hide both sidebars\",\n            icon: \"expand-arrows\",\n        });\n        sidebarAction(\"show_sidebars\", [\"left\", \"right\"], true, {\n            name: \"Show both sidebars\",\n            icon: \"compress-arrows\",\n        });\n    },\n    onunload() {\n        InjectionStore.unhook();\n    },\n});\n"],"names":[],"mappings":"knBAAS,eAAe,CAAI,GAAM,CAAE,KAAU,MACpC,QAAQ,CAAG,KAAK,CAAC,OAAO,CAAC,GAAG,KAC9B,QAAQ,EAAI,EAAE,EACd,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAE,CAAC,SACjB,IAAI,SAER,KAAK,WAGP,YAAY,CAAC,MAAc,KAC5B,eAAe,CAAC,MAAM,CAAE,QAAQ,CAAC,OAAO,OAClC,QAAQ,CAAI,MAAM,CAAS,QAAQ,KACnC,qBAAqB,CAAG,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,OAAO,CAClE,eAAe,CAAC,MAAM,CAAE,qBAAqB,KACzC,qBAAqB,CAAC,MAAM,EAAI,CAAC,QAC1B,QAAQ,CAAC,SAAS,CAAC,QAAQ,sDAW1B,cAAc,UAAd,eAAc,CAAC,MAAc,EACzC,OAAO,CAAC,IAAI,CAAC,MAAM,QAGP,MAAM,UAAN,OAAM,GAClB,OAAO,CAAC,OAAO,CAAC,YAAY,QAP1B,OAAO,oBAEG,cAAc,CAAd,cAAc,iBAId,MAAM,CAAN,MAAM,IAPhB,cAAc,GAAd,cAAc,eAYf,aAAa,CAAC,EAAU,CAAE,KAAe,CAAE,YAAgC,CAAE,IAA4B,EAC9G,cAAc,CAAC,cAAc,KACrB,MAAM,CAAC,EAAE,kBACN,IAAI,EACP,QAAQ,EAAE,IAAM,EAChB,KAAK,YACD,KAAK,CACA,GAAG,UAAC,IAAI,UAAK,KAAK,EAAO,MAAI,CAAT,IAAI,EAAC,IAAI,MAC7B,OAAO,UAAC,IAAI,MACH,SAAS,CAAG,YAAY,GAAI,MAAQ,GAAI,IAAI,CAAC,IAAI,EAAI,YAAY,CACvE,IAAI,CAAC,IAAI,EAAI,SAAS,IAE9B,YAAY,UAM5B,MAAM,CAAC,QAAQ,EAAC,SAAW,GACvB,IAAI,EAAE,QAAU,EAChB,KAAK,EAAE,oBAAsB,EAC7B,MAAM,EAAE,MAAQ,EAChB,WAAW,EAAE,qDAAuD,EACpE,OAAO,EAAE,IAAM,EAEf,MAAM,YACF,aAAa,EAAC,mBAAqB,IAAG,IAAM,IAAG,MAAQ,GACnD,IAAI,EAAE,mBAAqB,EAC3B,IAAI,EAAE,YAAc,IAExB,aAAa,EAAC,oBAAsB,IAAG,KAAO,IAAG,MAAQ,GACrD,IAAI,EAAE,oBAAsB,EAC5B,IAAI,EAAE,aAAe,IAEzB,aAAa,EAAC,aAAe,IAAG,IAAM,GAAE,KAAO,GAAG,KAAK,EACnD,IAAI,EAAE,kBAAoB,EAC1B,IAAI,EAAE,aAAe,IAEzB,aAAa,EAAC,aAAe,IAAG,IAAM,GAAE,KAAO,GAAG,IAAI,EAClD,IAAI,EAAE,kBAAoB,EAC1B,IAAI,EAAE,eAAiB,MAG/B,QAAQ,YACJ,cAAc,CAAC,MAAM"}